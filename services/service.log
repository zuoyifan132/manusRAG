INFO:     Started server process [64298]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:17724 (Press CTRL+C to quit)
2025-04-25 11:32:02.050 | INFO     | services.pipeline:run_pipeline:285 - --- 开始RAG流程，查询:  ---
2025-04-25 11:32:02.051 | INFO     | services.pipeline:process_uploaded_file:82 - 处理上传的文件: /Users/evan/Desktop/work/wind/FlashC/manusRAG/temp_uploads/5a306e91-daac-4dec-9e9a-eb9776eb8706_传统RAG搜索与broswer_use搜索比较.md
2025-04-25 11:32:02.051 | INFO     | services.pipeline:process_uploaded_file:101 - 成功从文件中提取文本，长度: 11364
2025-04-25 11:32:02.051 | INFO     | services.pipeline:run_pipeline:303 - 处理提取的文本
2025-04-25 11:32:02.051 | INFO     | services.pipeline:chunk_text:118 - === 运行文本分块 ===
2025-04-25 11:32:02.053 | INFO     | services.pipeline:chunk_text:142 - 分块成功: 共71块
2025-04-25 11:32:02.053 | INFO     | services.pipeline:ingest_text:151 - === 运行文本导入 ===
Open /Users/evan/Desktop/work/wind/FlashC/manusRAG/database/milvus/milvus_db/milvus_db.db failed, the file has been opened by another program
2025-04-25 11:32:02,095 [ERROR][_create_connection]: Failed to create new connection using: 3d58f447b3e14dd3a1039cf933b8bc66 (milvus_client.py:923)
2025-04-25 11:32:03.622 | INFO     | database.milvus.milvusManager:__init__:54 - Using Milvus Lite with local database file: /Users/evan/Desktop/work/wind/FlashC/manusRAG/services/../database/milvus/milvus_db/milvus_db.db
2025-04-25 11:32:03.743 | INFO     | database.milvus.milvusManager:__init__:66 - Successfully connected to collection: logseq_collection
WARNING: All log messages before absl::InitializeLog() is called are written to STDERR
I0000 00:00:1745551923.746752 13218517 fork_posix.cc:77] Other threads are currently calling into gRPC, skipping fork() handlers
Ingesting batch data into Milvus:   0%|          | 0/3 [00:00<?, ?it/s]I0000 00:00:1745551923.810263 13218517 fork_posix.cc:77] Other threads are currently calling into gRPC, skipping fork() handlers
I0000 00:00:1745551923.820050 13218517 fork_posix.cc:77] Other threads are currently calling into gRPC, skipping fork() handlers
2025-04-25 11:32:06.222 | INFO     | database.milvus.milvusManager:_ingest_batch:196 - Successfully inserted 32 records into collection logseq_collection
Ingesting batch data into Milvus:  33%|███▎      | 1/3 [00:02<00:04,  2.47s/it]2025-04-25 11:32:07.298 | INFO     | database.milvus.milvusManager:_ingest_batch:196 - Successfully inserted 32 records into collection logseq_collection
Ingesting batch data into Milvus:  67%|██████▋   | 2/3 [00:03<00:01,  1.65s/it]2025-04-25 11:32:08.211 | INFO     | database.milvus.milvusManager:_ingest_batch:196 - Successfully inserted 7 records into collection logseq_collection
Ingesting batch data into Milvus: 100%|██████████| 3/3 [00:04<00:00,  1.31s/it]Ingesting batch data into Milvus: 100%|██████████| 3/3 [00:04<00:00,  1.49s/it]
2025-04-25 11:32:08.211 | INFO     | services.pipeline:ingest_text:177 - 成功导入到 milvus: {'status': 'success', 'message': 'Successfully ingested 71 text chunks into database.', 'ingest_return': '[{"insert_count": 32, "ids": [457585964144132096, 457585964144132097, 457585964144132098, 457585964144132099, 457585964144132100, 457585964144132101, 457585964144132102, 457585964144132103, 457585964144132104, 457585964144132105, 457585964144132106, 457585964144132107, 457585964144132108, 457585964144132109, 457585964144132110, 457585964144132111, 457585964144132112, 457585964144132113, 457585964144132114, 457585964144132115, 457585964144132116, 457585964144132117, 457585964144132118, 457585964144132119, 457585964144132120, 457585964144132121, 457585964144132122, 457585964144132123, 457585964144132124, 457585964144132125, 457585964144132126, 457585964144132127], "cost": 0}, {"insert_count": 32, "ids": [457585964428558400, 457585964428558401, 457585964428558402, 457585964428558403, 457585964428558404, 457585964428558405, 457585964428558406, 457585964428558407, 457585964428558408, 457585964428558409, 457585964428558410, 457585964428558411, 457585964428558412, 457585964428558413, 457585964428558414, 457585964428558415, 457585964428558416, 457585964428558417, 457585964428558418, 457585964428558419, 457585964428558420, 457585964428558421, 457585964428558422, 457585964428558423, 457585964428558424, 457585964428558425, 457585964428558426, 457585964428558427, 457585964428558428, 457585964428558429, 457585964428558430, 457585964428558431], "cost": 0}, {"insert_count": 7, "ids": [457585964668158080, 457585964668158081, 457585964668158082, 457585964668158083, 457585964668158084, 457585964668158085, 457585964668158086], "cost": 0}]', 'time_taken': 4.468609094619751}
2025-04-25 11:32:08.212 | INFO     | services.pipeline:run_pipeline:358 - --- RAG流程完成 ---
INFO:     127.0.0.1:65145 - "POST /pipeline HTTP/1.1" 200 OK
2025-04-25 11:32:37.312 | INFO     | services.pipeline:run_pipeline:285 - --- 开始RAG流程，查询: 传统RAG与broswer use有什么区别 ---
2025-04-25 11:32:37.312 | INFO     | services.pipeline:retrieval:187 - === 运行检索，查询: 传统RAG与broswer use有什么区别 ===
2025-04-25 11:32:37.313 | INFO     | database.milvus.milvusManager:__init__:54 - Using Milvus Lite with local database file: /Users/evan/Desktop/work/wind/FlashC/manusRAG/services/../database/milvus/milvus_db/milvus_db.db
2025-04-25 11:32:37.314 | INFO     | database.milvus.milvusManager:__init__:66 - Successfully connected to collection: logseq_collection
2025-04-25 11:32:38.230 | INFO     | services.pipeline:retrieval:211 - 从 milvus 检索到 100 条结果
2025-04-25 11:32:38.230 | INFO     | services.pipeline:rerank:221 - === 运行重排序 ===
2025-04-25 11:32:43.951 | INFO     | services.pipeline:rerank:244 - 重排序结果数量: 10
2025-04-25 11:32:43.951 | INFO     | services.pipeline:run_pipeline:358 - --- RAG流程完成 ---
INFO:     127.0.0.1:65197 - "POST /pipeline HTTP/1.1" 200 OK
